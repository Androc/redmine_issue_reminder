<div class="splitcontentleft">
  <table class="list members">
    <thead>
      <tr>
        <th>Query</th>
        <th>Roles</th>
        <th>Interval</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @reminders.each do |reminder| %>
        <tr>
          <td><%= reminder.query.name %></td>
          <td><%= reminder.roles.collect {|r| r.name}.join(',') %></td>
          <td><%= Reminder.interval_value_display(reminder.interval,reminder.interval_value) %></td>
          <td class="buttons">
            <%= link_to_function l(:button_edit),
                                 "$('reminder-#{reminder.id}-edit').show(); return false;",
                                 :class => 'icon icon-edit' %>
             <%= link_to_remote(l(:button_delete), { :url => {:controller => 'reminders', :action => 'destroy', :id => reminder},
                                              :method => :post,
                                              :confirm => l(:reminder_delete_confirmation)
                                            }, :title => l(:button_delete),
                                               :class => 'icon icon-del')  %>
          </td>
        </tr>
        <tr id="reminder-<%= reminder.id %>-edit" style="display:none">
          <td colspan="3"><%= render :partial => 'form', :locals => { :reminder => reminder, :project => @project } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<div class="splitcontentright">
  <fieldset>
    <legend>New Reminder</legend>
    <%= render :partial => 'form', :locals => { :reminder => @reminder, :project => @project } %>
  </fieldset
</div>
